<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anatomia Online - Quiz Interativo</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header>
        <div class="logo">
            <div class="logo-icon">üë§</div>
            <div class="logo-text">
                <span class="logo-title">Anatomia Online</span>
                <span class="logo-subtitle">Quiz Interativo</span>
            </div>
        </div>
        <nav>
            <button id="homeBtn">In√≠cio</button>
            <button id="statsBtn">Estat√≠sticas</button>
            <button id="logoutBtn" style="display:none;">Trocar Usu√°rio</button>
        </nav>
    </header>
    <main>
        <!-- Tela Inicial -->
        <section id="homeContainer">
            <div class="home-hero">
                <div class="hero-logo">
                    <div class="vitruvian-man">üë§</div>
                </div>
                <h1>Bem-vindo ao Anatomia Online!</h1>
                <p>Descubra o fascinante mundo da anatomia humana atrav√©s de quizzes interativos e aprenda de forma
                    divertida.</p>
            </div>
            <ul class="benefits">
                <li>‚úîÔ∏è Quizzes interativos e educativos</li>
                <li>‚úîÔ∏è Estat√≠sticas detalhadas do progresso</li>
                <li>‚úîÔ∏è Feedback imediato e dicas</li>
                <li>‚úîÔ∏è Interface moderna e responsiva</li>
            </ul>
            <button id="startBtn">Come√ßar Quiz Agora</button>
            <div class="auth-links">
                <button id="loginShowBtn">Entrar</button>
                <button id="registerShowBtn">Cadastrar</button>
            </div>
        </section>
        <!-- Formul√°rio de Login -->
        <section id="loginContainer" class="auth-container" style="display:none;">
            <h2>Entrar</h2>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="E-mail" required="">
                <input type="password" id="loginPassword" placeholder="Senha" required="">
                <button type="submit">Entrar</button>
            </form>
            <p class="auth-link">Esqueceu sua senha? <button id="toForgotPasswordBtn" type="button"
                    class="link-btn">Recuperar senha</button></p>
            <p>N√£o tem conta? <button id="toRegisterBtn" type="button">Cadastre-se</button></p>
            <button id="backHomeFromLogin">Voltar</button>
        </section>

        <!-- Formul√°rio de Recupera√ß√£o de Senha -->
        <section id="forgotPasswordContainer" class="auth-container" style="display:none;">
            <h2>Recuperar Senha</h2>
            <p class="auth-description">Digite seu e-mail para receber o link de recupera√ß√£o</p>
            <form id="forgotPasswordForm">
                <input type="email" id="forgotEmail" placeholder="E-mail" required="">
                <button type="submit">Enviar Link</button>
            </form>
            <p class="auth-description" style="font-size: 0.85rem; margin-top: 1rem; color: #a0aec0;">
                üí° <strong>Desenvolvimento:</strong> Verifique se configurou o localhost no Supabase Dashboard
                (Authentication ‚Üí URL Configuration)
            </p>
            <p>Lembrou sua senha? <button id="backToLoginBtn" type="button">Voltar ao login</button></p>
        </section>

        <!-- Formul√°rio de Nova Senha -->
        <section id="resetPasswordContainer" class="auth-container" style="display:none;">
            <h2>Nova Senha</h2>
            <p class="auth-description">Digite sua nova senha</p>
            <form id="resetPasswordForm">
                <input type="password" id="newPassword" placeholder="Nova senha" required="" minlength="6">
                <input type="password" id="confirmPassword" placeholder="Confirme a senha" required="" minlength="6">
                <button type="submit">Alterar Senha</button>
            </form>
        </section>

        <!-- Formul√°rio de Cadastro -->
        <section id="registerContainer" class="auth-container" style="display:none;">
            <h2>Cadastrar</h2>
            <form id="registerForm">
                <input type="text" id="registerName" placeholder="Nome" required="">
                <input type="email" id="registerEmail" placeholder="E-mail" required="">
                <input type="password" id="registerPassword" placeholder="Senha" required="">
                <button type="submit">Cadastrar</button>
            </form>
            <p>J√° tem conta? <button id="toLoginBtn" type="button">Entrar</button></p>
            <button id="backHomeFromRegister">Voltar</button>
        </section>
        <!-- Menu Principal -->
        <section id="menuContainer" style="display:none;">
            <div class="menu-header">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <h2 id="userGreeting">Ol√°, Usu√°rio!</h2>
                        <p class="user-status">Pronto para aprender?</p>
                    </div>
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-card" id="quizMenuBtn">
                    <div class="card-icon">üß†</div>
                    <div class="card-content">
                        <h3>Iniciar Quiz</h3>
                        <p>Escolha uma categoria</p>
                    </div>
                    <div class="card-arrow">‚Üí</div>
                </div>

                <div class="menu-card" id="statsMenuBtn">
                    <div class="card-icon">üìä</div>
                    <div class="card-content">
                        <h3>Estat√≠sticas</h3>
                        <p>Veja seu progresso</p>
                    </div>
                    <div class="card-arrow">‚Üí</div>
                </div>

                <div class="menu-card" id="settingsMenuBtn">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <div class="card-content">
                        <h3>Configura√ß√µes</h3>
                        <p>Personalize sua experi√™ncia</p>
                    </div>
                    <div class="card-arrow">‚Üí</div>
                </div>

                <!-- Apenas para admin -->
                <div class="menu-card" id="adminPanelBtn" style="display:none;">
                    <div class="card-icon">üõ†Ô∏è</div>
                    <div class="card-content">
                        <h3>Painel Admin</h3>
                        <p>Gerencie as quest√µes</p>
                    </div>
                    <div class="card-arrow">‚Üí</div>
                </div>

                <div class="menu-card logout-card" id="logoutMenuBtn">
                    <div class="card-icon">üö™</div>
                    <div class="card-content">
                        <h3>Trocar Usu√°rio</h3>
                        <p>Sair da conta atual</p>
                    </div>
                    <div class="card-arrow">‚Üí</div>
                </div>
            </div>

            <div class="menu-footer">
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalAttempts">0</span>
                        <span class="stat-label">Tentativas</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="bestScore">0</span>
                        <span class="stat-label">Melhor</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="avgScore">0</span>
                        <span class="stat-label">M√©dia</span>
                    </div>
                </div>
            </div>
        </section>
        <!-- Sele√ß√£o de Categoria -->
        <section id="categoryContainer" style="display:none;">
            <h2>Escolha uma Categoria</h2>
            <div class="category-grid">
                <div class="category-card" id="superioresBtn">
                    <div class="category-icon">ü¶¥</div>
                    <div class="category-content">
                        <h3>Membros Superiores</h3>
                        <p>Bra√ßos, ombros e m√£os</p>
                        <div class="category-stats">
                            <span class="stat">1 pergunta</span>
                            <span class="difficulty-badge difficulty-facil">F√°cil</span>
                        </div>
                    </div>
                </div>
                <div class="category-card" id="inferioresBtn">
                    <div class="category-icon">ü¶µ</div>
                    <div class="category-content">
                        <h3>Membros Inferiores</h3>
                        <p>Pernas, quadris e p√©s</p>
                        <div class="category-stats">
                            <span class="stat">1 pergunta</span>
                            <span class="difficulty-badge difficulty-medio">M√©dio</span>
                        </div>
                    </div>
                </div>
                <div class="category-card" id="coracaoBtn">
                    <div class="category-icon">‚ù§Ô∏è</div>
                    <div class="category-content">
                        <h3>Cora√ß√£o</h3>
                        <p>Anatomia e estruturas card√≠acas</p>
                        <div class="category-stats">
                            <span class="stat">26 perguntas</span>
                            <span class="difficulty-badge difficulty-medio">M√©dio</span>
                        </div>
                    </div>
                </div>
            </div>
            <button id="backToMenuBtn">Voltar ao Menu</button>
        </section>

        <!-- Sele√ß√£o de Tipo de Quest√£o (Imagens vs Te√≥ricas) -->
        <section id="typeContainer" style="display:none;">
            <h2 id="typeTitle">Selecione o Tipo de Quest√£o</h2>
            <div class="category-grid">
                <div class="category-card" id="imagemBtn">
                    <div class="category-icon">üñºÔ∏è</div>
                    <div class="category-content">
                        <h3>Quest√µes com Imagens</h3>
                        <p>Identifica√ß√£o de estruturas anat√¥micas</p>
                        <div class="category-stats">
                            <span class="stat"><span id="imagemCount">0</span> perguntas</span>
                            <span class="difficulty-badge difficulty-medio">VISUAL</span>
                        </div>
                    </div>
                </div>
                <div class="category-card" id="teoricaBtn">
                    <div class="category-icon">üìö</div>
                    <div class="category-content">
                        <h3>Quest√µes Te√≥ricas</h3>
                        <p>Origem, inser√ß√£o, a√ß√£o e inerva√ß√£o</p>
                        <div class="category-stats">
                            <span class="stat"><span id="teoricaCount">0</span> perguntas</span>
                            <span class="difficulty-badge difficulty-dificil">TE√ìRICO</span>
                        </div>
                    </div>
                </div>
            </div>
            <button id="backToCategoryFromTypeBtn">Voltar</button>
        </section>

        <!-- Sele√ß√£o de Quantidade de Quest√µes -->
        <section id="quantityContainer" style="display:none;">
            <h2>Quantas quest√µes deseja responder?</h2>
            <p style="text-align:center; margin-bottom:1.5rem; opacity:0.8;">
                As quest√µes ser√£o selecionadas aleatoriamente
            </p>
            <div class="quantity-grid">
                <button class="quantity-card" data-quantity="5">
                    <div class="quantity-number">5</div>
                    <div class="quantity-label">Quest√µes</div>
                    <div class="quantity-time">‚è±Ô∏è ~5 min</div>
                </button>
                <button class="quantity-card" data-quantity="10">
                    <div class="quantity-number">10</div>
                    <div class="quantity-label">Quest√µes</div>
                    <div class="quantity-time">‚è±Ô∏è ~10 min</div>
                </button>
                <button class="quantity-card" data-quantity="20">
                    <div class="quantity-number">20</div>
                    <div class="quantity-label">Quest√µes</div>
                    <div class="quantity-time">‚è±Ô∏è ~20 min</div>
                </button>
                <button class="quantity-card" data-quantity="30">
                    <div class="quantity-number">30</div>
                    <div class="quantity-label">Quest√µes</div>
                    <div class="quantity-time">‚è±Ô∏è ~30 min</div>
                </button>
                <button class="quantity-card" data-quantity="all">
                    <div class="quantity-number">üìö</div>
                    <div class="quantity-label">Todas</div>
                    <div class="quantity-time" id="allQuestionsCount">Dispon√≠veis</div>
                </button>
            </div>
            <button id="backToCategoryBtn">Voltar</button>
        </section>

        <!-- Quiz -->
        <section id="quizContainer" style="display:none;">
            <div class="quiz-header">
                <h2 id="quizTitle">Quiz de Anatomia</h2>
                <div class="quiz-progress">
                    <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
                </div>
            </div>

            <!-- Barra de Progresso -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="progressPercentage">10%</span>
                </div>
            </div>

            <div class="quiz-image-container">
                <img id="quizImage" src="" alt="Imagem do quiz" style="display:none;">
            </div>
            <div id="quizQuestion"></div>
            <div id="quizOptions"></div>
            <div id="quizFeedback"></div>
            <div id="quizExplanation" class="explanation-box" style="display:none;"></div>
            <div class="quiz-controls">
                <button id="nextQuestionBtn" style="display:none;">Pr√≥xima</button>
                <button id="backMenuBtn">Menu</button>
            </div>
        </section>
        <!-- Modal de Configura√ß√µes -->
        <div id="settingsModal" class="settings-modal" style="display:none;">
            <div class="settings-overlay" id="settingsOverlay"></div>
            <div class="settings-panel">
                <div class="settings-header">
                    <h2>‚öôÔ∏è Configura√ß√µes</h2>
                    <button class="settings-close" id="closeSettingsModal">√ó</button>
                </div>
                <div class="settings-body">
                    <div class="setting-group">
                        <label class="setting-label">
                            <span class="setting-icon">üé®</span>
                            <span class="setting-text">Tema</span>
                        </label>
                        <select id="themeSelect" class="setting-select">
                            <option value="light">‚òÄÔ∏è Claro</option>
                            <option value="dark">üåô Escuro</option>
                        </select>
                    </div>

                    <div class="setting-group">
                        <label class="setting-label">
                            <span class="setting-icon">üìè</span>
                            <span class="setting-text">Tamanho da fonte</span>
                        </label>
                        <select id="fontSizeSelect" class="setting-select">
                            <option value="small">Pequeno</option>
                            <option value="medium" selected>M√©dio</option>
                            <option value="large">Grande</option>
                        </select>
                    </div>

                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="autoExplanation">
                            <span class="checkbox-label">
                                <span class="setting-icon">üìñ</span>
                                <span class="setting-text">Mostrar explica√ß√£o automaticamente</span>
                            </span>
                        </label>
                    </div>

                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="soundEffects">
                            <span class="checkbox-label">
                                <span class="setting-icon">üîä</span>
                                <span class="setting-text">Sons de acerto/erro</span>
                            </span>
                        </label>
                    </div>

                    <div class="setting-group">
                        <button type="button" id="reviewTutorialBtn" class="btn-tutorial">
                            üéì Rever Tutorial
                        </button>
                    </div>
                </div>

                <div class="settings-footer">
                    <button type="button" id="confirmSettingsBtn" class="btn-confirm">
                        ‚úì Salvar Configura√ß√µes
                    </button>
                    <button type="button" id="resetProgressBtn" class="btn-reset">
                        üîÑ Resetar Progresso
                    </button>
                </div>
            </div>
        </div>
        <!-- Estat√≠sticas -->
        <section id="statsContainer" style="display:none;">
            <h2>Estat√≠sticas</h2>
            <div class="stats-controls">
                <label>
                    Categoria:
                    <select id="statsCategoryFilter">
                        <option value="all">Todas as Categorias</option>
                        <option value="superiores">Membros Superiores</option>
                        <option value="inferiores">Membros Inferiores</option>
                        <option value="coracao">Cora√ß√£o</option>
                    </select>
                </label>
                <label>
                    Per√≠odo:
                    <select id="statsTimeFilter">
                        <option value="all">Todos os tempos</option>
                        <option value="7">√öltimos 7 dias</option>
                        <option value="30">√öltimos 30 dias</option>
                        <option value="90">√öltimos 90 dias</option>
                    </select>
                </label>
            </div>
            <div class="stats-chart-card">
                <canvas id="evolutionChart" height="220"></canvas>
            </div>
            <div id="statsContent"></div>
            <button id="backStatsBtn">Menu</button>
        </section>
        <!-- Mensagens e Dicas -->
        <div id="messageContainer"></div>
    </main>

    <!-- Modal de Aviso -->
    <div id="warningModal" class="modal">
        <div class="modal-content-warning">
            <div class="warning-icon">üöß</div>
            <h3>Em Desenvolvimento</h3>
            <p id="warningMessage">Esta se√ß√£o est√° sendo preparada e estar√° dispon√≠vel em breve.</p>
            <button id="closeWarningBtn" class="btn-warning-ok">Entendi</button>
        </div>
    </div>

    <!-- Modal do Tutorial Interativo -->
    <div id="tutorialModal" class="modal tutorial-modal" style="display:none;">
        <div class="tutorial-content">
            <div class="tutorial-header">
                <h2>üéì Tutorial - Bem-vindo!</h2>
                <span class="tutorial-step" id="tutorialStepIndicator">1 / 5</span>
            </div>
            <div class="tutorial-body">
                <div class="tutorial-icon" id="tutorialIcon">üìö</div>
                <h3 id="tutorialTitle">Escolha uma Categoria</h3>
                <p id="tutorialDescription">
                    Selecione entre Membros Superiores, Membros Inferiores ou Cora√ß√£o para come√ßar seus estudos.
                </p>
                <div class="tutorial-highlight" id="tutorialHighlight"></div>
            </div>
            <div class="tutorial-footer">
                <button id="tutorialSkipBtn" class="tutorial-btn-secondary">Pular Tutorial</button>
                <div class="tutorial-navigation">
                    <button id="tutorialPrevBtn" class="tutorial-btn-nav" style="display:none;">‚Üê Anterior</button>
                    <button id="tutorialNextBtn" class="tutorial-btn-primary">Pr√≥ximo ‚Üí</button>
                </div>
            </div>
            <div class="tutorial-dots" id="tutorialDots">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>
    </div>

    <!-- Modal para ampliar imagem -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">√ó</span>
            <img id="modalImage" src="" alt="Imagem ampliada">
        </div>
    </div>

    <!-- Supabase (UMD build via jsdelivr para garantir o global `window.supabase`) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
    <script>
        // Configura√ß√£o do Supabase (chaves j√° inclu√≠das no c√≥digo)
        window.SUPABASE_URL = 'https://nromzokjnzzuwhalulut.supabase.co';
        window.SUPABASE_ANON = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yb216b2tqbnp6dXdoYWx1bHV0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MTY4NjYsImV4cCI6MjA3NzA5Mjg2Nn0.Ejo648JfYujvUgjBgXA3fM4lC81o05X9HWrcFdR_sgA';
        if (window.SUPABASE_URL && window.SUPABASE_ANON && window.supabase) {
            window.supabaseClient = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON);
            console.log('‚úÖ Supabase client inicializado');
        } else {
            console.error('‚ùå Falha ao inicializar Supabase');
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/api_supabase.js"></script>
    <script src="js/quiz_data.js"></script>
    <script src="js/script.js"></script>

</body>

</html>